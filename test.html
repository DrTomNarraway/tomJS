
<!DOCTYPE html>
<html>	
	<body>
		<script src="./assets/javascripts/jatos.js"></script>
		<script src="./tomJS.js"></script>
		<script>
            
            const BLOCK_REPS = 2;
            const CONDITION  = [0.500, 1.000, 1.500];
            const DIFFICULTY = [0.4, 0.47, 0.53, 0.60];
            const STIMULUS   = PixelPatch;
            const TRIAL_REPS = 1;
            const TRIAL_TYPE = VisibleFeedbackDeadline;

            // set up experiment ==================================================================

            const args = { 'gather_demographics': false, 'verbose': true, 'grid_lines':true};
            const tomJS = new Experiment(args);

            // script =============================================================================

            const S00 = 'Welcome to this experiment. Please press F and then J a few times ';
            const S01 = 'to make sure your keyboard is being read by the experiment correctly.';
            const S02 = '~key~';
            const S03 = 'Press F and J to continue.';

            const S10 = 'You responded correctly to ^score^% trials this block.';
            const S11 = 'Your average response time was ^rt^ milliseconds this block.';
            const S12 = 'Press f and j to continue.';

            // trial arguments ====================================================================

			const _blockwise = {
			};

            const _trialwise = {
                'pp_aness' : DIFFICULTY,
                'condition' : CONDITION,
            };

            const _additional = {
                'stimulus': STIMULUS,
                'deadline_max' : 1.500,
            };

            // slides =============================================================================

			const welcome = new Slide([
                { 'class': 'text', 'text': S00, 'y': 0.25 },
                { 'class': 'text', 'text': S01, 'y': 0.3 },
                { 'class': 'text', 'text': S02 , 'upper':true},
                { 'class': 'text', 'text': S03, 'y': 0.7 },
				], false);

			const countdown = new Countdown(3.0);

			const end_block = new EndBlock([
                { 'class': 'text', 'text': S10, 'y': 0.45 },
                { 'class': 'text', 'text': S11},
                { 'class': 'text', 'text': S12, 'y': 0.70 },
			]);         

            // timeline ===========================================================================

            tomJS.appendToTimeline(welcome);

            tomJS.appendBlocks(
                TRIAL_TYPE, _blockwise, _trialwise, _additional, 
                BLOCK_REPS, TRIAL_REPS, countdown, end_block
            );

            // run ================================================================================

			if (tomJS.verbose) console.log(tomJS.timeline);

			tomJS.run();

		</script>
	</body>
</html>
