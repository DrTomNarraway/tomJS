
<!DOCTYPE html>
<html>
<body>
    <script src="jatos.js" id="jatos"></script>
    <script src="tomJS.js" id="tomJS"></script>
    <script>

        const _args = {'fullscreen':false};

        const tomJS = new Experiment(_args);

        const _blockwise = {}; 

        const _trialwise = {
            'condition':[200, 600], 
            'difficulty': [0.01, 0.50],
            'target':['A', 'B']
        };
        
        const _additional = { 
            'gp_ori': 2, 
            'stimulus': Gabor, 
            'signal': LeakyWindow,
        };

        const _conditional = {
            'fixation_duration': { 
                '~this.args.condition~ == 200': 1400,
            }
        };
        
        const _welcome = new Slide([
            {'class': 'text', 'text': 'DEBUG VERSION', 'y':0.25},
            {'class': 'text', 'text': '~tomJS.key~', 'upper': true},            
            {'class': 'text', 'text': 'Press F and J to continue.', 'y': 0.75}
        ]);

        const _above = new Slide([
            {'class': 'text', 'text': 'You will see a bar above the stimulus. Respond when the bar is within the indicated area and is blue.', 'y': 0.25 },
            {'class': 'progressbar', 'signal': LeakyWindow, 'progressbar_y': 0.33, 'signal_on': 0.8, 'signal_off': 1, 'progressbar_scale':0.50 },
            {'class': 'gabor', 'difficulty':0.50, 'gp_size':0.50, 'gp_ori':2 },
            {'class': 'text', 'text': 'Press F and J to start.', 'y': 0.75 },
        ]);

        const _below = new Slide([
            {'class': 'text', 'text': 'There will now also be a bar below the stimulus. The task is otherwise unchanged.', 'y': 0.25 },
            {'class': 'progressbar', 'tag': 'abv', 'signal': LeakyWindow, 'progressbar_y': 0.33, 'signal_on': 0.8, 'signal_off': 1, 'progressbar_scale': 0.50 },
            {'class': 'gabor', 'difficulty': 0.50, 'gp_size': 0.50, 'gp_ori': 2 },
            {'class': 'progressbar', 'tag': 'blw', 'signal': LeakyWindow, 'progressbar_y': 0.66, 'signal_on': 0.8, 'signal_off': 1, 'progressbar_scale': 0.50 },
            {'class': 'text', 'text': 'Press F and J to start.', 'y': 0.75 },
        ]);

        const _end_block = new EndBlock([
            {'class': 'text', 'text': 'END OF BLOCK', 'y': 0.25},
            {'class': 'text', 'text': 'Accuracy: ~this.data.accuracy~', 'y':0.475},
            {'class': 'text', 'text': 'Hits: ~this.data.hits~', 'y':0.525 },
            {'class': 'text', 'text': 'Press F and J to continue.', 'y': 0.75}
        ]);

        const _end_exp = new EndExperiment([
            {'class': 'text', 'text': 'END OF EXPERIMENT', 'y': 0.25},
            {'class': 'text', 'text': 'Accuracy: ~this.data.accuracy~', 'y': 0.475},
            {'class': 'text', 'text': 'Hits: ~this.data.hits~', 'y': 0.525},
            {'class': 'text', 'text': 'Press F and J to continue.', 'y': 0.75}
        ]); 

        tomJS.appendToTimeline(_welcome);

        tomJS.appendToTimeline(_above);

        tomJS.appendBlock(
            trial_type = ProgressBarResponseSignal,
            trialwise = _trialwise,
            additional = _additional,
            conditional = _conditional,
            trial_reps = 1,
            start_slide = null,
            end_slide = _end_block,
            add_countdown = true
        );

        tomJS.appendToTimeline(_below);

        tomJS.appendBlock(
            trial_type = ProgressBarResponseSignal,
            trialwise = _trialwise,
            additional = {..._additional, ...{'above_and_below':true}},
            conditional = _conditional,
            trial_reps = 1,
            start_slide = null,
            end_slide = _end_block,
            add_countdown = true
        );

        tomJS.replaceEndBlockWithEndExperiment(_end_exp);

        tomJS.start();

    </script>
</body>
</html>
