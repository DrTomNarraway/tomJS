
<!DOCTYPE html>
<html>	
	<body>
		<script src="./assets/javascripts/jatos.js"></script>
		<script src="./tomJS.js"></script>
		<script>
            
			const BLOCK_REPS  = 2;
            const CONTRAST    = [0.01, 1.00];
			const ORIENTATION = 3;
			const TRIAL_REPS  = 1;
			const STIMULUS    = Gabor;

            const args = { 'gather_demographics':false, 'verbose':true, 'show_fps':true };
			const tomJS = new Experiment(args);

			// slides ---------------------------------------------------------

			const welcome = new Slide([
				{'class':'text', 'text':'Welcome to this experiment. Please press f and then j', 'y':0.25},
                {'class':'text', 'text':'to make sure your keyboard is being read by the experiment correctly.','y':0.3},
				{'class':'text', 'text':'~key~'},
				{'class':'text', 'text':'Press f and j to continue.', 'y':0.7},
				], false);

			const gabor = new Slide([
				{'class':'text', 'text':'On each trial you will see a stimulus like the one below.','y':0.2},
                {'class':'text', 'text':'You will press f if you think it is leaning left and j if you think it is leaning right.','y':0.25},
                {'class':'text', 'text':'Press f and j now to see examples.','y':0.3},
                {'class':'gabor', 'target':'~dir~', 'gabor_ori':ORIENTATION, 'gabor_contrast':CONTRAST[CONTRAST.length], 'gabor_size':0.25},
                {'class':'text', 'text':'Press f and j to continue.', 'y':0.7},
				], false);

			const countdown = new Countdown(3.0);

			const end_block = new EndBlock([
				{'class':'text','text':'You responded correctly to ^score^% trials this block.'},
                {'class':'text', 'text':'Press f and j to continue.', 'y':0.7},
			]);

			// trial arguments ------------------------------------------------

			const _trialwise = {
				'target' : ['L', 'R'],
				'gabor_contrast': CONTRAST,
			};

			const _additional = {
				'stimulus'  : STIMULUS,
				'gabor_ori' : ORIENTATION,
			};

			const _trialreps = TRIAL_REPS;

			// timeline -------------------------------------------------------

            tomJS.appendToTimeline(welcome);
			tomJS.appendToTimeline(gabor);

            tomJS.appendBlock(Trial, _trialwise, _additional, _trialreps, countdown, end_block);

			// run ------------------------------------------------------------

			if (tomJS.verbose) console.log(tomJS.timeline);

			tomJS.run();

		</script>
	</body>
</html>
