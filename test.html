
<!DOCTYPE html>
<html>	
	<body>
		<script src="./assets/javascripts/jatos.js"></script>
		<script src="./tomJS.js"></script>
		<script>
            
            const BLOCK_REPS = 2;
            const DIFFICULTY = [0.4, 0.46, 0.48, 0.52, 0.54, 0.60];
            const TRIAL_REPS = 1;
            const STIMULUS   = PixelPatch;

            // set up experiment ----------------------------------------------

            const args = { 'gather_demographics': false, 'verbose': true, 'show_fps': true };
            const tomJS = new Experiment(args);

            // trial arguments ------------------------------------------------

			const _blockwise = {
			};

            const _trialwise = {
                'pixelpatch_aness' : DIFFICULTY,
            };

            const _additional = {
                'stimulus': STIMULUS,
            };

			// slides ---------------------------------------------------------

			const welcome = new Slide([
                { 'class': 'text', 'text': 'Welcome to this experiment. Please press F and then J a few times ', 'y': 0.25 },
                { 'class': 'text', 'text': 'to make sure your keyboard is being read by the experiment correctly.', 'y': 0.3 },
                { 'class': 'text', 'text': '~key~' },
                { 'class': 'text', 'text': 'Press F and J to continue.', 'y': 0.7 },
				], false);

			const gabor = new Slide([
                { 'class': 'text', 'text': 'On each trial you will see a stimulus like the one below. Please press ', 'y': 0.20 },
                { 'class': 'text', 'text': 'F if you think the left line is longer or J if you think the right line is.' , 'y': 0.25 },
                { 'class': 'text', 'text': 'Press F and J now to see examples.', 'y': 0.30 },
                //{'class':'gabor', 'target':'~dir~', 'gabor_ori':ORIENTATION, 'gabor_contrast':CONTRAST[CONTRAST.length], 'gabor_size':0.25},
                //{ 'class': 'twolines', 'target': '~dir~','twoline_difference':DIFFERENCE[DIFFERENCE.length] },
                { 'class': 'text', 'text': 'Press F and J to continue.', 'y': 0.70 },
				], false);

			const countdown = new Countdown(3.0);

			const end_block = new EndBlock([
                { 'class': 'text', 'text': 'You responded correctly to ^score^% trials this block.', 'y': 0.45 },
                { 'class': 'text', 'text': 'Your average response time was ^rt^ milliseconds this block.' },
                { 'class': 'text', 'text': 'Press f and j to continue.', 'y': 0.70 },
			]);         

			// timeline -------------------------------------------------------

            tomJS.appendToTimeline(welcome);
			tomJS.appendToTimeline(gabor);

            tomJS.appendBlocks(Trial, _blockwise, _trialwise, _additional, BLOCK_REPS, TRIAL_REPS, countdown, end_block);

			// run ------------------------------------------------------------

			if (tomJS.verbose) console.log(tomJS.timeline);

			tomJS.run();

		</script>
	</body>
</html>
